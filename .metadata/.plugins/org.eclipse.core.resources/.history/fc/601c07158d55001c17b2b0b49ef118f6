package com.greycampus.dao;

import java.sql.PreparedStatement;
import java.sql.SQLException;

import javax.sql.DataSource;
import javax.transaction.Transactional;

import org.apache.jasper.compiler.Node.TemplateText;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.BatchPreparedStatementSetter;
import org.springframework.jdbc.core.support.JdbcDaoSupport;
import org.springframework.stereotype.Repository;

import com.greycampus.entity.Address;
import com.greycampus.entity.Customer;

@Repository
@Transactional
public class CustomerDAO extends JdbcDaoSupport {

	@Autowired
	public CustomerDAO(DataSource dataSource) {
		this.setDataSource(dataSource);
	}

	public static java.sql.Date getCurrentDate() {
		java.util.Date today = new java.util.Date();
		return new java.sql.Date(today.getTime());
	}

	public int insert(Customer customer , Address address) {
		String sql = "insert into customer values(?,?,?,?,?,?)" + "insert into address values(?,?,?,?)";
//		String queryAddress="insert into address values(?,?,?,?)";
//		Address address = new Address();
//		address.setCity(address.getStreet());
//		address.setCity(address.getCity());
//		address.setCity(address.getCountry());
//		address.setCustomer(customer);

		getJdbcTemplate().batchUpdate(sql, new BatchPreparedStatementSetter() {
			
			@Override
			public void setValues(PreparedStatement ps, int i) throws SQLException {
				// TODO Auto-generated method stub
				
			}
			
			@Override
			public int getBatchSize() {
				// TODO Auto-generated method stub
				return 0;
			}
		})
//		return getJdbcTemplate().update(sql, customer.getCid(), customer.getName(), customer.getType(),
//				customer.getPhone(), getCurrentDate(), getCurrentDate());
	}

}
